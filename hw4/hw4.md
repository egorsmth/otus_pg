
подключился пользователем postgres и создал базу testdb, законектился к базе testdb, 
создал схему testnm, создвл таблицу t1 и вставил строку.
Создал роль и выдал права как указао в задании. Создал пользователя testread. 
перед подключением с пользователем testread изменил настройки в pg_hba.conf peer -> scram-sha-256.
Подключился пользователем testread к бд testdb.
15. сделайте select * from t1; 
    - ERROR: relation t1 does not exist;
    - указали селект без схемы testnm и постгрес ищет табличку в public. посмотрев search_path мы в этом убедимся.
![[3.PNG]]

переключился на пользователя postgres удалил таблицу t1 и пересоздал её с указанием схемы testnm. 
Переключился на пользователя testread и подключился к базе testdb.
select * from testnm.t1 опять выдал ошибку. Так произошло потому что назначили права перед тем как создали таблицу и она в права не попала.

переключился на пользователя postgres и заново дал права на селект из схемы testnm роли readonly.
Переключился на пользователя testread, теперь select сработал.

34. теперь попробуйте выполнить команду create table t2(c1 integer); insert into t2 values (2);
35. а как так? нам же никто прав на создание таблиц и insert в них под ролью readonly?
    - видимо тут должна была создаться табличка, но у меня permission denied for schema public.
    - при указании схемы testnm аналогичная ошибка.

Попробуем сделать так чтобы create table t2(c1 integer); insert into t2 values (2); для пользователя testread все же сработали.
переключился на пользователя postgres, подключился к базе testdb выдал all on schema pulic.
переключился назад на пользователя testread, теперь create table t2(c1 integer);  insert into t2 values(1); отработали.